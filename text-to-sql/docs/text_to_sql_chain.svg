<svg xmlns='http://www.w3.org/2000/svg' width='1200' height='600' viewBox='0 0 1200 600'>
<defs>
  <marker id='arrow' markerWidth='10' markerHeight='10' refX='8' refY='3' orient='auto' markerUnits='strokeWidth'>
    <path d='M0,0 L0,6 L9,3 z' fill='#555'/>
  </marker>
</defs>
<style>
  .box { fill:#fff; stroke:#666; stroke-width:1.4; rx:8; ry:8; }
  .title { font: 18px sans-serif; fill:#222; font-weight:600; }
  .small { font: 12px sans-serif; fill:#333; }
  .arrow { stroke:#555; stroke-width:1.2; fill:none; marker-end:url(#arrow); }
  .dashed { stroke-dasharray:6,4; }
</style>
<text x='40' y='35' class='title'>Text-to-SQL Chain (Simplified)</text>
<rect x='40' y='80' width='160' height='50' class='box'/>
<text x='120.0' y='110.0' text-anchor='middle' class='small'>User Question</text>
<rect x='220' y='80' width='170' height='50' class='box'/>
<text x='305.0' y='110.0' text-anchor='middle' class='small'>Context + RAG</text>
<rect x='410' y='80' width='210' height='50' class='box'/>
<text x='515.0' y='102.0' text-anchor='middle' class='small'>LLM Engineer</text>
<text x='515.0' y='118.0' text-anchor='middle' class='small'>(+ Expert if needed)</text>
<rect x='640' y='80' width='190' height='50' class='box'/>
<text x='735.0' y='110.0' text-anchor='middle' class='small'>Postprocess + Policy</text>
<rect x='850' y='80' width='150' height='50' class='box'/>
<text x='925.0' y='110.0' text-anchor='middle' class='small'>Response (qid)</text>
<line x1='200' y1='105.0' x2='220' y2='105.0' class='arrow'/>
<line x1='390' y1='105.0' x2='400' y2='105.0' class='arrow'/>
<line x1='610' y1='105.0' x2='580' y2='105.0' class='arrow'/>
<line x1='770' y1='105.0' x2='760' y2='105.0' class='arrow'/>
<rect x='220' y='170' width='160' height='50' class='box'/>
<text x='300.0' y='200.0' text-anchor='middle' class='small'>/query/run</text>
<rect x='400' y='170' width='160' height='50' class='box'/>
<text x='480.0' y='200.0' text-anchor='middle' class='small'>Oracle Execute</text>
<rect x='580' y='170' width='120' height='50' class='box'/>
<text x='640.0' y='200.0' text-anchor='middle' class='small'>Result</text>
<line x1='925' y1='130' x2='300' y2='170' class='arrow dashed'/>
<line x1='380' y1='195.0' x2='400' y2='195.0' class='arrow'/>
<line x1='560' y1='195.0' x2='580' y2='195.0' class='arrow'/>
<rect x='220' y='260' width='230' height='50' class='box'/>
<text x='335.0' y='290.0' text-anchor='middle' class='small'>Metadata Sync + RAG Index</text>
<rect x='470' y='260' width='150' height='50' class='box'/>
<text x='545.0' y='290.0' text-anchor='middle' class='small'>Vector Store</text>
<line x1='450' y1='285.0' x2='470' y2='285.0' class='arrow'/>
<line x1='545' y1='310' x2='305' y2='130' class='arrow dashed'/>
<rect x='220' y='350' width='200' height='50' class='box'/>
<text x='320.0' y='372.0' text-anchor='middle' class='small'>Evaluation</text>
<text x='320.0' y='388.0' text-anchor='middle' class='small'>(eval_questions.py)</text>
<rect x='440' y='350' width='130' height='50' class='box'/>
<text x='505.0' y='380.0' text-anchor='middle' class='small'>Eval Report</text>
<line x1='420' y1='375.0' x2='440' y2='375.0' class='arrow'/>
</svg>