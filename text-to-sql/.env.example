# Demo/prod flags
DEMO_MODE=true

# Budget (KRW)
BUDGET_LIMIT_KRW=10000
COST_ALERT_THRESHOLD_KRW=8000

# Models
ENGINEER_MODEL=gpt-4o
EXPERT_MODEL=gpt-4o
INTENT_MODEL=local
PLANNER_ENABLED=true
PLANNER_MODEL=gpt-4o-mini
# planner activation: always | complex_only | off
PLANNER_ACTIVATION_MODE=complex_only
PLANNER_COMPLEXITY_THRESHOLD=1
PLANNER_MIN_QUESTION_TOKENS=16
PLANNER_REQUIRED_GATE_COUNT=2

# Context budget
CONTEXT_TOKEN_BUDGET=2000
EXAMPLES_PER_QUERY=3
TEMPLATES_PER_QUERY=1
SQL_EXAMPLES_PATH=var/metadata/sql_examples.jsonl
SQL_EXAMPLES_AUGMENTED_PATH=var/metadata/sql_examples_augmented.jsonl
SQL_EXAMPLES_INCLUDE_AUGMENTED=false
SQL_EXAMPLES_EXACT_MATCH_ENABLED=true
LLM_MAX_OUTPUT_TOKENS=500
CLARIFIER_ENABLED=false

# Retry
MAX_RETRY_ATTEMPTS=1

# Expert trigger
EXPERT_TRIGGER_MODE=score
EXPERT_SCORE_THRESHOLD=4

# DB safety
MAX_DB_JOINS=3
ROW_CAP=5000
DB_TIMEOUT_SEC=180
# Accuracy mode에서 Oracle call timeout은 최소 180초로 강제됩니다.
DB_TIMEOUT_SEC_ACCURACY=180
# API 레벨 timeout은 DB timeout보다 길게 유지하세요 (권장: 190초 이상).
API_REQUEST_TIMEOUT_SEC=190
SQL_AUTO_REPAIR_ENABLED=true
SQL_AUTO_REPAIR_MAX_ATTEMPTS=1
SQL_ZERO_RESULT_REPAIR_ENABLED=true
SQL_ZERO_RESULT_REPAIR_MAX_ATTEMPTS=1

# Oracle connection
ORACLE_DSN=
ORACLE_USER=
ORACLE_PASSWORD=
ORACLE_DEFAULT_SCHEMA=
ORACLE_DRIVER_MODE=thin
# Apple Silicon + x86 Instant Client 조합에서는 docker-compose text-sql 서비스에
# platform: linux/amd64 를 설정하고 ORACLE_DRIVER_MODE=thick 사용을 권장합니다.
# Optional fallback when ORACLE_DSN is empty
ORACLE_HOST=
ORACLE_PORT=1521
ORACLE_SERVICE_NAME=
# Optional SSL mode for env-based connection profile: disable | require | verify-ca | verify-full
ORACLE_SSL_MODE=disable
ORACLE_POOL_MIN=1
ORACLE_POOL_MAX=4
ORACLE_POOL_INC=1
ORACLE_POOL_TIMEOUT_SEC=10
ORACLE_LIB_DIR=
ORACLE_TNS_ADMIN=

# RAG
RAG_PERSIST_DIR=var/rag
RAG_TOP_K=5
RAG_EMBEDDING_DIM=128
RAG_HYBRID_ENABLED=true
# retrieval mode: legacy | bm25_then_rerank
RAG_RETRIEVAL_MODE=bm25_then_rerank
RAG_HYBRID_CANDIDATES=20
RAG_BM25_CANDIDATES=50
RAG_DENSE_CANDIDATES=50
RAG_BM25_MAX_DOCS=1500

# MongoDB (RAG store)
MONGO_URI=
MONGO_DB=text_to_sql
MONGO_COLLECTION=rag_docs
MONGO_VECTOR_INDEX=

# Logs
EVENTS_LOG_PATH=var/logs/events.jsonl
COST_STATE_PATH=var/logs/cost_state.json
BUDGET_CONFIG_PATH=var/logs/budget_config.json

# Demo cache
DEMO_CACHE_PATH=var/cache/demo_cache.json

# OpenAI
OPENAI_API_KEY=
OPENAI_BASE_URL=
OPENAI_ORG=

# PDF cohort pipeline
PDF_SNIPPET_MAX_COUNT=30
PDF_VALIDATION_ENABLED=true
PDF_VALIDATION_SAMPLE_ROWS=5
PDF_STRICT_AMBIGUITY_MODE=false
PDF_ACCURACY_MODE=false
PDF_ACCURACY_REPAIR_MAX_ROUNDS=2
PDF_ACCURACY_NEGATIVE_SAMPLE_N=50
PDF_ACCURACY_INCLUDE_TABLES=true
PDF_ACCURACY_TABLE_CAPTURE_CHARS=6000
PDF_ACCURACY_SECTION_KEYWORDS_EXPANDED=true
PDF_ACCURACY_FAIL_FAST_ON_INVARIANTS=true
# Optional: schema map json path for accuracy mode
PDF_SCHEMA_MAP_PATH=/app/var/metadata/pdf_schema_map.json
